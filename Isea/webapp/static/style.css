:root{
  --bg: #ffffff;
  --text: #111111;
  --panel-bg: #ffffff;
  --panel-text: #111111;
  --legend-bg: rgba(255,255,255,0.95);
  --tooltip-bg: rgba(17,17,17,0.92);
  --tooltip-text: #ffffff;
  --accent: #2ca9b7;          /* Renewable */
  --accent-nr: #ff7f0e;       /* Non-Renewable */
  --stroke-soft: rgba(0,0,0,0.08);
}
body.dark{
  --bg: #0e1012;
  --text: #e6eef6;
  --panel-bg: #121417;
  --panel-text: #e6eef6;
  --legend-bg: rgba(22,24,27,0.95);
  --tooltip-bg: rgba(245,245,245,0.06);
  --tooltip-text: #e6eef6;
  --stroke-soft: rgba(255,255,255,0.08);
}
*{box-sizing:border-box;}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto;
  transition: background .18s ease, color .18s ease;
}
header{
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 18px; border-bottom:1px solid var(--stroke-soft);
  background:var(--panel-bg);
}
.controls { display:flex; gap:12px; align-items:center; flex-wrap: wrap; }
#yearRange { width:200px; }
#yearRange:focus-visible, button:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; border-radius:6px; }

main#layout { display:flex; gap:12px; padding:12px; height: calc(100vh - 96px); }
#mapPanel, #vizPanel { flex:1; background:var(--panel-bg); border-radius:12px; padding:8px; overflow:hidden; position:relative; }
#bubble-map { width:100%; height:100%; }
#sunburst { width:100%; height:100%; min-height:520px; display:flex; align-items:center; justify-content:center; position:relative; }

.tooltip {
  position:absolute; pointer-events:none; visibility:hidden;
  background:var(--tooltip-bg); color:var(--tooltip-text);
  padding:8px 10px; border-radius:8px; font-size:13px; z-index:9999;
  box-shadow: 0 8px 24px rgba(0,0,0,0.15);
}
.legendBox {
  position:absolute; right:12px; top:12px; background: var(--legend-bg);
  padding:8px; border-radius:10px; font-size:13px;
  box-shadow:0 6px 18px rgba(0,0,0,0.08);
  color: var(--panel-text);
}
#statusbar{
  position: fixed; left:12px; bottom:12px; padding:6px 10px;
  background: var(--legend-bg); color: var(--panel-text);
  border-radius: 8px; font-size: 12px; box-shadow:0 6px 18px rgba(0,0,0,0.08);
}

svg { overflow: visible; }

/* Responsive stack */
@media (max-width: 980px){
  main#layout { flex-direction: column; height: auto; }
  #sunburst { min-height: 480px; }
}
