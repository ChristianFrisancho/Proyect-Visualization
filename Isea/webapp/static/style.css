:root{
  --bg: #ffffff;
  --text: #111111;
  --map-fill: #d3d3d3;
  --map-stroke: #777;
  --accent: #2ca9b7;
  --panel-bg: rgba(255,255,255,0.98);
  --panel-text: #111111;
  --tooltip-bg: rgba(0,0,0,0.82);
  --tooltip-text: #fff;
}
body.dark{
  --bg: #0f1113;
  --text: #e6eef6;
  --map-fill: #31343a;
  --map-stroke: #666;
  --accent: #7fb4ff;
  --panel-bg: rgba(18,18,18,0.96);
  --panel-text: #e6eef6;
  --tooltip-bg: rgba(255,255,255,0.06);
  --tooltip-text: #fff;
}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 20px;
  border-bottom:1px solid rgba(0,0,0,0.06);
}
.controls { display:flex; gap:8px; align-items:center; margin-left: 8px; }
#yearRange { width:200px; }

#helpPanel { padding:10px 18px; border-bottom:1px solid rgba(0,0,0,0.04); background:transparent; color:var(--text); }
#helpPanel ol { margin:6px 0 0 18px; padding:0; font-size:14px; color: var(--text); }

main { display:flex; gap:12px; padding:12px; }
#leftCol, #rightCol { flex: 1; min-width: 320px; }
.viz { background: var(--panel-bg); border-radius:8px; box-shadow: 0 6px 18px rgba(0,0,0,0.04); padding:8px; color: var(--panel-text); position:relative; }
#bubble-map { height:520px; }
#sunburst { height:420px; }
#countryPanel { height:520px; padding:12px; overflow:auto; }

.tooltip {
  position: absolute;
  pointer-events: none;
  visibility: hidden;
  background: var(--tooltip-bg);
  color: var(--tooltip-text);
  padding: 8px 10px;
  border-radius: 8px;
  font-size: 13px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.2);
  max-width: 420px;
}
.tooltip button { cursor:pointer; padding:6px 8px; border-radius:6px; border: none; background:#fff; color:#111; font-weight:600; margin-right:6px; }
body.dark .tooltip button { background: rgba(255,255,255,0.06); color: var(--text); }

table { width:100%; border-collapse:collapse; color:var(--panel-text); }
table td { padding:6px; border-bottom:1px solid rgba(0,0,0,0.04); font-size:13px; }

#countryPanel svg { display:block; margin: 0 auto; max-width:100%; }
.sliceLabel { pointer-events:none; color: white; font-weight:700; }

@media (max-width: 1100px){
  main { flex-direction: column; }
  #bubble-map { height:420px; }
  #sunburst, #countryPanel { height: 420px; }
}
