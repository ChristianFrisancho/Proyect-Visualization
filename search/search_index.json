{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to the future. Welcome to iSea","text":"<p>Your future main data visualization library is already here. iSea provides an interactive dashboard and analytical toolkit  for exploring the global transition to electric mobility. Using a series of coordinated visualizations, this platform allows you to move seamlessly from a high-level geographic overview to deep, data-driven explanations.</p> <p></p>"},{"location":"#what-you-can-do-here","title":"What You Can Do Here","text":"<p>Our goal is to help you answer key questions about the EV transition such as:</p> <ul> <li>Where is EV adoption and charging infrastructure strongest?</li> <li>How do different countries compare on transition pressure and infrastructure readiness?</li> <li>Why do specific patterns exist?</li> </ul> <p>To achieve this, the project is structured around our core visualizations and tutorials.</p>"},{"location":"#explore-the-visualizations","title":"Explore the Visualizations","text":"<p>Get a detailed overview of each interactive component of the dashboard.</p> <ul> <li>World Map &amp; Line Chart: The geographic entry point for global trends.</li> <li>Diagnostic Scatter Plot: The core tool for deep-dive comparative analysis.</li> <li>Advanced Analysis Panel: An on-demand ML toolkit for uncovering structural insights.</li> <li>Parallel Coordinates Plot: A multivariate view for comparing country profiles across multiple metrics.</li> <li>Bubble Chart: Explore relationships between three variables with size-encoded bubbles.</li> <li>Correlation Heatmap: Visualize metric correlations and cross-tabulated data in matrix format.</li> <li>Trend Line Chart: Track historical trends and forecasts for multiple time series.</li> </ul>"},{"location":"#follow-our-tutorials","title":"Follow Our Tutorials","text":"<p>Step-by-step guides on how to use the diagnostic tools to answer specific analytical questions.</p> <ul> <li>Tutorial: Transition Pressure Analysis</li> <li>Tutorial: Infrastructure Alignment Analysis</li> </ul>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Ready to explore the data? Follow our Quick Start Guide to run the project on your own machine.</p>"},{"location":"getting_started/","title":"Quick Start Guide","text":"<p>There are two ways to experience this project. For full interactivity, we strongly recommend running the notebook locally.</p>"},{"location":"getting_started/#option-1-running-the-notebook-locally-recommended","title":"Option 1: Running the Notebook Locally (Recommended)","text":"<p>This method gives you the full interactive experience, allowing you to use all the custom widgets and run the ML analysis panel on your own selections.</p>"},{"location":"getting_started/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.8+</li> <li><code>pip</code> and <code>git</code> installed on your system.</li> </ul>"},{"location":"getting_started/#step-1-clone-the-repository","title":"Step 1: Clone the Repository","text":"<p>Open your terminal and clone this project's repository to your local machine.</p> <pre><code>git clone https://github.com/YOUR_USERNAME/YOUR_REPOSITORY.git\ncd YOUR_REPOSITORY\n</code></pre>"},{"location":"getting_started/#step-2-set-up-a-virtual-environment","title":"Step 2: Set Up a Virtual Environment","text":"<p>It is best practice to create a dedicated environment for the project's dependencies.</p> <pre><code># Create the virtual environment\npython -m venv venv\n\n# Activate it (Windows)\nvenv\\Scripts\\activate\n\n# Activate it (macOS/Linux)\nsource venv/bin/activate\n</code></pre>"},{"location":"getting_started/#step-3-install-the-required-libraries","title":"Step 3: Install the Required Libraries","text":"<p>The project depends on several Python libraries, including the custom isea-vis package. Install them all with a single command.</p> <pre><code>pip install pandas ipywidgets scikit-learn matplotlib seaborn isea-vis\n</code></pre> <p>Note: If you have a <code>requirements.txt</code> file, you can simply run <code>pip install -r requirements.txt</code></p>"},{"location":"getting_started/#step-4-launch-jupyter-and-run-the-notebook","title":"Step 4: Launch Jupyter and Run the Notebook","text":"<p>You're all set! Start Jupyter and open the main notebook file.</p> <pre><code>jupyter notebook P6_deliverable_final.ipynb\n</code></pre> <p>Once the notebook is open, you can run the cells to generate the visualizations and interact with them.</p>"},{"location":"getting_started/#option-2-viewing-a-non-interactive-version-online","title":"Option 2: Viewing a Non-Interactive Version Online","text":"<p>If you just want to see the notebook's content and the pre-rendered outputs without running the code yourself, you can use NBViewer.</p> <p>Please note: The interactive widgets (maps, scatter plots, and analysis panel) will not be functional in this mode. They will appear as static images or empty outputs.</p>"},{"location":"getting_started/#how-to-view","title":"How to View:","text":"<p>Simply click the link below to open a rendered version of the notebook directly from the GitHub repository:</p> <p>View on NBViewer</p> <p>(Remember to replace <code>YOUR_USERNAME</code> and <code>YOUR_REPOSITORY</code> with your actual GitHub details.)</p>"},{"location":"tutorials/infrastructure/","title":"Tutorial: Infrastructure Alignment Analysis","text":"<p>This tutorial explains how to use the ScatterBrush to analyze the relationship between charging infrastructure and the size of the battery-electric vehicle (BEV) fleet.</p> <p></p>"},{"location":"tutorials/infrastructure/#configuration","title":"Configuration","text":"<p>Set the scatter plot axes as follows: -   X-axis: <code>ChargingStations</code> -   Y-axis: <code>StockBEV</code></p>"},{"location":"tutorials/infrastructure/#interpretation","title":"Interpretation","text":"<p>This view helps assess whether the deployment of public charging infrastructure is keeping pace with the growth of the BEV fleet. The <code>y=x</code> diagonal represents a 1:1 ratio of public chargers to BEVs.</p> <ul> <li>Well above the diagonal (High Y/X Ratio): The number of BEVs far exceeds the number of public chargers. This may indicate a reliance on private home charging or a potential infrastructure bottleneck.</li> <li>Near the diagonal (Moderate Ratio): Infrastructure deployment is roughly keeping pace with fleet growth.</li> <li>Below the diagonal (Low Y/X Ratio): There are more public chargers than BEVs. This often signals a policy-driven effort to \"overbuild\" infrastructure to stimulate future adoption.</li> </ul>"},{"location":"tutorials/infrastructure/#step-by-step-analysis-example","title":"Step-by-Step Analysis Example","text":""},{"location":"tutorials/infrastructure/#question-how-does-the-infrastructure-to-vehicle-ratio-compare-across-different-vehicle-types-and-how-has-it-changed-over-time","title":"Question: How does the infrastructure-to-vehicle ratio compare across different vehicle types, and how has it changed over time?","text":"<ul> <li>Method:<ol> <li>Set the axes to <code>ChargingStations</code> (X) and <code>StockBEV</code> (Y).</li> <li>Activate the x=y button.</li> <li>Move the time slider from the earliest year to the latest, observing how different modes move in relation to the diagonal.</li> <li>Use the legend to filter by <code>Cars</code>, <code>Vans</code>, and <code>Buses</code> individually to see their patterns more clearly.</li> </ol> </li> <li>Answer:<ul> <li>Cars: Almost always have a moderate to high ratio (above the diagonal), which is expected since many owners rely on home charging. Countries near or below the line demonstrate an exceptionally strong government push for public infrastructure.</li> <li>Buses: Are not relevant in this view, as they typically use private, depot-based charging, not the public network measured here.</li> <li>Vans &amp; Trucks: In the early years, some commercial vehicles show moderate ratios. However, as time progresses, they tend to fall further below the diagonal. This suggests that for commercial fleets, the availability of public chargers becomes less of a determining factor for adoption, and other factors (e.g., total cost of ownership, depot charging solutions, vehicle availability) are more critical.</li> </ul> </li> </ul>"},{"location":"tutorials/transition/","title":"Tutorial: Transition Pressure Analysis","text":"<p>This tutorial demonstrates how to use the ScatterBrush diagnostic tool to analyze \"transition pressure\"\u2014whether a region's EV fleet is growing faster or slower than its conventional fleet.</p> <p></p>"},{"location":"tutorials/transition/#configuration","title":"Configuration","text":"<p>Set the scatter plot axes as follows: -   X-axis: <code>StockShare</code> (%) -   Y-axis: <code>SalesShare</code> (%)</p>"},{"location":"tutorials/transition/#interpretation","title":"Interpretation","text":"<p>The <code>y=x</code> diagonal line is critical for this analysis. It represents the equilibrium point where the share of new EV sales exactly matches the existing EV share of the total fleet.</p> <ul> <li>Above the diagonal (Y &gt; X): The share of new EV sales is higher than the current fleet's share. This indicates positive transition pressure, and the overall EV share of the fleet is actively growing.</li> <li>Below the diagonal (Y &lt; X): The share of new EV sales is lower than the current fleet's share. This indicates negative pressure, meaning the EV fleet's growth is slower than the conventional fleet's.</li> </ul>"},{"location":"tutorials/transition/#step-by-step-analysis-examples","title":"Step-by-Step Analysis Examples","text":"<p>Think about some questions that our library can help you to answer.</p>"},{"location":"tutorials/transition/#question-1-which-countries-showed-the-fastest-relative-growth-for-cars-and-buses-in-2021","title":"Question 1: Which countries showed the fastest relative growth for cars and buses in 2021?","text":"<ul> <li>Method:<ol> <li>Move the time slider to 2021.</li> <li>Activate the 0-100 and x=y buttons.</li> <li>Identify the countries positioned furthest vertically from the diagonal line.</li> </ol> </li> <li>Answer:<ul> <li>Top 5 for Cars: Norway, Iceland, Sweden, Denmark, Finland.</li> <li>Top 5 for Buses: China, Netherlands, Finland, Sweden, Belgium.</li> </ul> </li> </ul>"},{"location":"tutorials/transition/#question-2-were-these-countries-always-the-fastest-growers","title":"Question 2: Were these countries always the fastest growers?","text":"<ul> <li>Method:<ol> <li>Select these top-performing countries on the 2021 plot.</li> <li>Lock the axes zoom by clicking the lock icon.</li> <li>Move the time slider back through previous years and observe their positions.</li> </ol> </li> <li>Answer:     No. For example, the Netherlands was an early adopter for cars but was overtaken by 2021. Some of the 2021 leaders were previously below the diagonal in earlier years, while other countries performed better. This shows that leadership in transition pressure can change rapidly.</li> </ul>"},{"location":"tutorials/transition/#question-3-how-did-the-adoption-of-vans-and-buses-evolve-for-the-earliest-adopters","title":"Question 3: How did the adoption of vans and buses evolve for the earliest adopters?","text":"<ul> <li>Method:<ol> <li>Go to the year 2014.</li> <li>Use the legend to hide \"Cars\" and \"Trucks\".</li> <li>Zoom in on the area where <code>StockShare</code> is just above 0.1%.</li> <li>Select the visible points (early adopters for vans/buses).</li> <li>Lock the axes and move the time slider forward to 2023.</li> </ol> </li> <li>Answer:     In the early years (&lt;2014), vans were growing faster. Buses were often below the diagonal, indicating their electrification was lagging. However, buses later overtook vans in terms of transition pressure, first in China (2014) and then in Europe. By the later years, buses showed much stronger acceleration, likely driven by public policy and municipal fleet renewals.</li> </ul>"},{"location":"visualizations/bubble_chart/","title":"Bubble Chart","text":"<p>Purpose: To explore relationships between three continuous variables across different entities, revealing clusters and outliers.</p> <p>This visualization uses position (X and Y axes) and size (bubble radius) to encode three dimensions of data simultaneously, making it ideal for comparing countries or regions across multiple metrics.</p> <p></p>"},{"location":"visualizations/bubble_chart/#components-and-features","title":"Components and Features","text":"<ol> <li> <p>Interactive Bubbles:</p> <ul> <li>Each bubble represents an entity (e.g., a country or region).</li> <li>The X position, Y position, and radius encode three different metrics.</li> <li>Hover: Displays detailed information including all three metric values and the group category.</li> </ul> </li> <li> <p>Color-Coded Groups:</p> <ul> <li>Bubbles are colored by a categorical variable (e.g., continent or vehicle type), making it easy to identify patterns within groups.</li> </ul> </li> <li> <p>Automatic Scaling:</p> <ul> <li>The chart automatically adjusts axis ranges based on the data, with square-root scaling for bubble sizes to ensure accurate area representation.</li> </ul> </li> </ol>"},{"location":"visualizations/bubble_chart/#how-to-build","title":"How to Build","text":"<p>The <code>D3Bubble</code> widget accepts a list of dictionaries, where each dictionary represents one bubble. Each record must contain:</p> <ul> <li><code>id</code>: A unique identifier (e.g., country name)</li> <li><code>x</code>: Value for the X-axis</li> <li><code>y</code>: Value for the Y-axis</li> <li><code>r</code>: Value for the bubble radius (size)</li> <li><code>group</code>: A categorical value for color coding</li> </ul> <p>Simply prepare your data as a list of records and pass it to the widget constructor along with axis labels.</p>"},{"location":"visualizations/bubble_chart/#quick-example","title":"Quick Example","text":"<pre><code>from Isea.bubble import D3Bubble\n\n# Sample data: comparing countries\ndata = [\n    {\"id\": \"USA\", \"x\": 1500000, \"y\": 250000, \"r\": 8.5, \"group\": \"Americas\"},\n    {\"id\": \"China\", \"x\": 6800000, \"y\": 1200000, \"r\": 12.3, \"group\": \"Asia\"},\n    {\"id\": \"Germany\", \"x\": 850000, \"y\": 180000, \"r\": 18.2, \"group\": \"Europe\"},\n    {\"id\": \"Norway\", \"x\": 120000, \"y\": 45000, \"r\": 82.4, \"group\": \"Europe\"},\n    {\"id\": \"Japan\", \"x\": 450000, \"y\": 95000, \"r\": 6.1, \"group\": \"Asia\"},\n]\n\nbubble = D3Bubble(\n    data=data,\n    title=\"EV Stock vs Sales by Country\",\n    xLabel=\"Total EV Stock\",\n    yLabel=\"Annual Sales\",\n    zLabel=\"Market Share\",\n    width=700,\n    height=500\n)\n\nbubble\n</code></pre>"},{"location":"visualizations/bubble_chart/#available-configuration-options","title":"Available Configuration Options","text":"Parameter Type Description <code>data</code> list List of dictionaries with <code>id</code>, <code>x</code>, <code>y</code>, <code>r</code>, <code>group</code> keys <code>title</code> str Chart title displayed at the top <code>xLabel</code> str Label for the X-axis <code>yLabel</code> str Label for the Y-axis <code>zLabel</code> str Label for the size dimension (shown in tooltip) <code>width</code> int Chart width in pixels (default: 700) <code>height</code> int Chart height in pixels (default: 500)"},{"location":"visualizations/bubble_chart/#analytical-questions-this-view-can-answer","title":"Analytical Questions This View Can Answer","text":"<ul> <li>Which countries have high EV sales but low market penetration?</li> <li>Are there regional clusters in adoption patterns?</li> <li>Which outliers are punching above their weight in the EV transition?</li> </ul>"},{"location":"visualizations/heatmap_chart/","title":"Heatmap","text":"<p>Purpose: To visualize the correlation or relationship intensity between multiple variables in a matrix format.</p> <p>This visualization displays a grid of colored cells where the color intensity represents the value at each intersection, making it perfect for correlation matrices or cross-tabulated data.</p> <p></p>"},{"location":"visualizations/heatmap_chart/#components-and-features","title":"Components and Features","text":"<ol> <li> <p>Color-Coded Matrix:</p> <ul> <li>Each cell represents the intersection of a row and column variable.</li> <li>Color intensity indicates the value magnitude, with support for diverging colormaps (e.g., <code>coolwarm</code> for correlations).</li> </ul> </li> <li> <p>Interactive Tooltips:</p> <ul> <li>Hover: Displays the exact row, column, and value for any cell.</li> <li>Cells are highlighted on hover for easy identification.</li> </ul> </li> <li> <p>Value Labels:</p> <ul> <li>When cells are large enough, numeric values are displayed directly on the heatmap for quick reading.</li> </ul> </li> <li> <p>Flexible Colormaps:</p> <ul> <li>Use <code>viridis</code> for sequential data or <code>coolwarm</code> for diverging data (like correlations ranging from -1 to 1).</li> </ul> </li> </ol>"},{"location":"visualizations/heatmap_chart/#how-to-build","title":"How to Build","text":"<p>The <code>D3Heatmap</code> widget accepts a pandas DataFrame where:</p> <ul> <li>The index becomes the row labels</li> <li>The columns become the column labels</li> <li>The values in the cells are displayed as colors</li> </ul> <p>This is ideal for correlation matrices generated with <code>df.corr()</code> or pivot tables.</p>"},{"location":"visualizations/heatmap_chart/#quick-example-with-correlation-matrix","title":"Quick Example with Correlation Matrix","text":"<pre><code>import pandas as pd\nfrom Isea.heatmap import D3Heatmap\n\n# Create sample data\ndata = {\n    \"StockBEV\": [100, 200, 150, 300, 250],\n    \"SalesBEV\": [20, 45, 30, 80, 60],\n    \"ChargingStations\": [50, 120, 80, 200, 150],\n    \"GDP\": [500, 800, 600, 1200, 900],\n}\ndf = pd.DataFrame(data)\n\n# Calculate correlation matrix\ncorr_matrix = df.corr()\n\n# Create heatmap\nheatmap = D3Heatmap(\n    df=corr_matrix,\n    title=\"EV Metrics Correlation Matrix\",\n    cmap=\"coolwarm\",\n    width=500,\n    height=400\n)\n\nheatmap\n</code></pre>"},{"location":"visualizations/heatmap_chart/#quick-example-with-custom-data","title":"Quick Example with Custom Data","text":"<pre><code>import pandas as pd\nfrom Isea.heatmap import D3Heatmap\n\n# Create a pivot-style DataFrame\nregions = [\"Europe\", \"Asia\", \"Americas\"]\nmetrics = [\"Stock\", \"Sales\", \"Charging\"]\nvalues = [\n    [85, 72, 68],\n    [92, 88, 45],\n    [60, 55, 78],\n]\n\ndf = pd.DataFrame(values, index=regions, columns=metrics)\n\nheatmap = D3Heatmap(\n    df=df,\n    title=\"Regional EV Performance\",\n    cmap=\"viridis\",\n    width=450,\n    height=350\n)\n\nheatmap\n</code></pre>"},{"location":"visualizations/heatmap_chart/#available-configuration-options","title":"Available Configuration Options","text":"Parameter Type Description <code>df</code> DataFrame Pandas DataFrame with numeric values <code>title</code> str Chart title displayed at the top <code>cmap</code> str Color scheme: <code>\"viridis\"</code> (sequential) or <code>\"coolwarm\"</code> (diverging) <code>width</code> int Chart width in pixels (default: 600) <code>height</code> int Chart height in pixels (default: 400)"},{"location":"visualizations/heatmap_chart/#analytical-questions-this-view-can-answer","title":"Analytical Questions This View Can Answer","text":"<ul> <li>Which metrics are strongly correlated with EV adoption?</li> <li>Are there unexpected negative correlations in the data?</li> <li>How do different regions compare across multiple dimensions?</li> </ul>"},{"location":"visualizations/ml_panel/","title":"Advanced Analysis Panel","text":"<p>Purpose: To apply statistical and machine learning models to a user-selected subset of data to uncover patterns, trends, and structural relationships.</p> <p>This panel transforms visual observations from the scatter plot into quantitative explanations. It functions as the \"brain\" of the dashboard, running on-demand analyses.</p> <p></p>"},{"location":"visualizations/ml_panel/#components-and-features","title":"Components and Features","text":"<p>The panel is activated by clicking the \"Run EV Adoption Analysis\" button and operates on the points selected in the Diagnostic Scatter Plot. It generates the following analyses:</p> <ol> <li> <p>Clustering Analysis (K-Means):</p> <ul> <li>What it does: Groups the selected regions/modes into distinct adoption profiles based on their latest EV metrics.</li> <li>Visualization: A heatmap displays the average characteristics of each cluster. More intense colors indicate higher values for that metric.</li> <li>Insights: Identifies archetypes like \"Established Leaders,\" \"Fast-Emerging Markets,\" or \"Laggards.\"</li> </ul> </li> <li> <p>Regression Analysis (Trends):</p> <ul> <li>What it does: Applies linear regression to the historical data of the top-performing regions for a specific metric (default is <code>SalesBEV</code>).</li> <li>Visualization: A line chart shows historical data (solid lines) and a 3-year forecast (dashed lines).</li> <li>Insights: Quantifies the \"adoption speed\" (growth per year) and predicts short-term performance.</li> </ul> </li> <li> <p>Correlation Analysis:</p> <ul> <li>What it does: Calculates the Pearson correlation matrix between all key metrics for the selected data subset.</li> <li>Visualization: A heatmap shows the strength and direction of the relationships. Red indicates a strong positive correlation, while blue indicates a strong negative correlation.</li> <li>Insights: Answers questions like: Is the growth in chargers strongly correlated with the growth in BEV sales?</li> </ul> </li> </ol>"},{"location":"visualizations/ml_panel/#implementation-walkthrough","title":"Implementation Walkthrough","text":"<p>The panel is built around a central function, <code>run_full_analysis</code>, which is triggered by a button click. This function orchestrates several smaller analytical functions.</p>"},{"location":"visualizations/ml_panel/#step-1-core-analytical-functions","title":"Step 1: Core Analytical Functions","text":"<p>Three main functions form the backbone of the analysis. Each function takes a DataFrame of selected data and performs a specific task.</p> <pre><code># 1. Clustering Function\n# Groups regions into profiles based on their latest EV metrics.\ndef cluster_regions_by_ev_profile(df_latest, n_clusters=4):\n    # ... uses scikit-learn's KMeans ...\n    return df_latest_with_clusters, cluster_stats, quality_metrics\n\n# 2. Regression Function\n# Calculates growth trends and forecasts for a given metric.\ndef predict_ev_trends(df_wide, selection_ids, metric='SalesBEV', top_n=5):\n    # ... uses scikit-learn's LinearRegression ...\n    return results_dataframe\n\n# 3. Correlation Function\n# Computes the correlation matrix for key EV metrics.\ndef analyze_ev_correlations(df_latest):\n    # ... uses pandas .corr() method ...\n    return correlation_matrix\n\n</code></pre>"},{"location":"visualizations/ml_panel/#step-2-creating-the-user-interface","title":"Step 2: Creating the User Interface","text":"<p>The user interface consists of a button to trigger the analysis and an output area where the results will be displayed.</p> <pre><code>import ipywidgets as widgets\nfrom IPython.display import display, HTML\n\n# Create the button that the user will click\nbutton = widgets.Button(\n    description='Run EV Adoption Analysis',\n    button_style='success',\n    icon='car',\n    layout=widgets.Layout(width='300px')\n)\n\n# Create the output widget to hold the results\noutput_ml = widgets.Output()\n\n</code></pre>"},{"location":"visualizations/ml_panel/#step-3-the-orchestrator-function","title":"Step 3: The Orchestrator Function","text":"<p>This function ties everything together. It is set up to run whenever the button is clicked. It grabs the selection from the main scatter plot (w) and passes it to the analytical functions.</p> <pre><code>def run_full_analysis(b):\n    with output_ml:\n        output_ml.clear_output() # Clear previous results\n\n        # 1. Get the current selection from the scatter plot\n        selection_keys = w.selection.get('keys', [])\n        df_selected = wide[wide['id'].isin(selection_keys)] if selection_keys else wide\n\n        # 2. Run Clustering\n        df_latest, _ = get_latest_year_data(df_selected)\n        clusters_df, cluster_stats, quality = cluster_regions_by_ev_profile(df_latest, ...)\n        # ... display clustering results and heatmap ...\n\n        # 3. Run Regression\n        predict_ev_trends(df_selected, ...)\n        # ... display trend chart and insights ...\n\n        # 4. Run Correlation\n        analyze_ev_correlations(df_latest)\n        # ... display correlation heatmap ...\n\n# Link the button click to the orchestrator function\nbutton.on_click(run_full_analysis)\n\n</code></pre>"},{"location":"visualizations/ml_panel/#step-4-display-the-panel","title":"Step 4: Display the Panel","text":"<p>Finally, the button and output area are displayed together, ready for user interaction.</p> <pre><code>display(widgets.VBox([\n    widgets.HTML(\"&lt;h3&gt;EV Adoption Analysis Panel&lt;/h3&gt;\"),\n    button,\n    output_ml\n]))\n</code></pre>"},{"location":"visualizations/ml_panel/#this-analytical-panel-can-help-us-show-some-insights","title":"This Analytical Panel Can Help Us Show Some Insights","text":"<ul> <li>Are there fundamentally different EV adoption profiles among the regions I have selected?</li> <li>What is the expected annual growth rate for BEV sales in the leading markets?</li> <li>Which metrics are most strongly interconnected, suggesting cause-and-effect relationships?</li> </ul>"},{"location":"visualizations/parallel_plot/","title":"Parallel Coordinates Plot","text":"<p>Purpose: To simultaneously compare multiple metrics across a large number of countries, allowing for the identification of profiles, patterns, and trade-offs.</p> <p>This chart is ideal for multivariate analysis. Instead of comparing just two variables in a scatter plot, here we can visualize four or more at once.</p> <p></p>"},{"location":"visualizations/parallel_plot/#how-to-read-the-chart","title":"How to Read the Chart","text":"<ul> <li>Vertical Axes: Each vertical axis represents a different metric (<code>StockBEV</code>, <code>StockPHEV</code>, <code>ChargingStations</code>).</li> <li>Lines: Each line that crosses the axes represents a single country. The line's path shows that country's profile across all metrics.</li> <li>Patterns: Countries with similar profiles will have lines that follow similar paths. Crossing lines indicate trade-offs (a country might be high on <code>StockBEV</code> but low on <code>StockPHEV</code>).</li> </ul>"},{"location":"visualizations/parallel_plot/#components-and-features","title":"Components and Features","text":"<ol> <li> <p>Reorderable Axes:</p> <ul> <li>You can click and drag the axes to reorder them. Placing two axes next to each other makes it easy to see the correlation between those two variables.</li> </ul> </li> <li> <p>Interactive Highlighting (Hover):</p> <ul> <li>Hovering over a line highlights it across the entire chart and displays its label (the country name), making it easy to identify individual profiles.</li> </ul> </li> <li> <p>Time Slider:</p> <ul> <li>Allows you to see how the profiles of all countries change year after year.</li> </ul> </li> </ol>"},{"location":"visualizations/parallel_plot/#implementation-walkthrough","title":"Implementation Walkthrough","text":"<p>This visualization requires a specific data preparation step to aggregate data to the country level and then format it into a JSON-like structure expected by the JavaScript component.</p>"},{"location":"visualizations/parallel_plot/#step-1-data-aggregation","title":"Step 1: Data Aggregation","text":"<p>The primary <code>wide</code> DataFrame is granular (Country \u00d7 Mode). For this country-level view, we must first aggregate the data by summing up the values for all modes within each country.</p> <pre><code># The 'wide' DataFrame contains data per mode\n# We need to create a new DataFrame aggregated by country\n\n# Select all columns that contain yearly data\nvalue_cols = [c for c in wide.columns if re.search(r\"__F\\\\d{4}$\", str(c))]\n\n# Group by 'region' (country) and sum the values\nwide_ev_country = wide.groupby(\"region\", as_index=False)[value_cols].sum(min_count=1)\n</code></pre>"},{"location":"visualizations/parallel_plot/#step-2-data-packing-for-javascript","title":"Step 2: Data Packing for JavaScript","text":"<p>The ParallelEnergy widget expects data in a specific nested dictionary format. This helper function transforms the aggregated DataFrame into that structure.</p> <pre><code>def build_energy_pack(df_in, dims, years, key_col=\"region\"):\n    records = []\n    for _, row in df_in.iterrows():\n        rec = {\"label\": row[key_col]}\n        for d in dims:\n            rec[d] = [row.get(f\"{d}__F{y}\", 0.0) for y in years]\n        records.append(rec)\n\n    return {\"years\": [f\"F{y}\" for y in years], \"dims\": list(dims), \"records\": records}\n\n# Define the dimensions and years to include\ndims_all = (\"StockBEV\", \"StockPHEV\", \"StockFCEV\", \"ChargingStations\")\nYEARS = [y for y in all_years if y &gt;= 2015]\n\n# Build the final data packet\npack = build_energy_pack(wide_ev_country, dims_all, YEARS)\n</code></pre>"},{"location":"visualizations/parallel_plot/#step-3-widget-initialization-and-data-injection","title":"Step 3: Widget Initialization and Data Injection","text":"<p>We initialize the ParallelEnergy widget. Note that it is first created with placeholder data and then the real, packed data is injected into the .data attribute.</p> <pre><code>from Isea import ParallelEnergy\n\n# Initialize the widget\nw_parallel = ParallelEnergy(\n    data=pd.DataFrame(), # Start with empty data\n    dims=dims_all,\n    year_start=max(YEARS),\n    width=1280,\n    # ... other config options\n)\n\n# Set custom options for the visualization's appearance\nw_parallel.options = {\n    **w_parallel.options,\n    \"title\": f\"EV Landscape \u2014 {max(YEARS)}\",\n    \"reorder\": True,\n    \"log_axes\": False,\n}\n\n# Inject the prepared data packet into the widget\nw_parallel.data = pack\n</code></pre>"},{"location":"visualizations/parallel_plot/#step-4-display-the-visualization","title":"Step 4: Display the Visualization","text":"<p>Displaying the widget variable renders the interactive parallel coordinates plot.</p> <pre><code># Display the widget\nw_parallel\n</code></pre>"},{"location":"visualizations/parallel_plot/#metrics-used","title":"Metrics Used","text":"<p>This visualization compares the following key metrics for the top countries by BEV stock:</p> <ul> <li>StockBEV: The total fleet of Battery Electric Vehicles.</li> <li>StockPHEV: The total fleet of Plug-in Hybrid Electric Vehicles.</li> <li>StockFCEV: The total fleet of Fuel Cell Electric Vehicles (Hydrogen).</li> <li>ChargingStations: The total number of public charging points.</li> </ul>"},{"location":"visualizations/parallel_plot/#analytical-questions-this-view-can-answer","title":"Analytical Questions This View CAn Answer","text":"<ul> <li>Do countries with a high BEV stock also tend to have a high PHEV stock, or are these mutually exclusive strategies?</li> <li>Are there visual \"clusters\" of countries with similar adoption profiles?</li> <li>Which countries are outliers with a very different profile from the rest (e.g., many chargers but few vehicles)?</li> </ul>"},{"location":"visualizations/scatter_plot/","title":"Diagnostic Scatter Plot","text":"<p>Purpose: To perform a detailed diagnostic analysis to compare metrics, identify relationships, and analyze subgroups of regions and transport modes.</p> <p>This interactive scatter plot is the central tool for deep-dive analysis. It provides complete flexibility to explore the relationships between different variables and how those relationships evolve over time.</p> <p></p>"},{"location":"visualizations/scatter_plot/#components-and-features","title":"Components and Features","text":"<ol> <li> <p>Dynamic Axes (X/Y):</p> <ul> <li>You can select any of the available metrics for the X and Y axes from the control panel, enabling endless comparisons.</li> </ul> </li> <li> <p>Time Slider:</p> <ul> <li>Filters the data to show only the selected year. Animating the slider reveals the evolution of regions over time.</li> </ul> </li> <li> <p>Brushing and Linked View:</p> <ul> <li>Click and drag to select a group of points. A second, linked scatter plot will appear below, showing only your selected points. This is ideal for focused analysis without the noise of other data.</li> </ul> </li> <li> <p>Legend Filtering:</p> <ul> <li>Click on the labels in the legend (<code>Cars</code>, <code>Buses</code>, <code>Vans</code>, <code>Trucks</code>) to toggle the visibility of different transport modes, allowing you to isolate specific patterns.</li> </ul> </li> <li> <p>Analytical Overlays (Buttons):</p> <ul> <li><code>x=y</code>: Draws a diagonal line that is essential for ratio and acceleration analysis (see tutorials).</li> <li><code>0-100</code>: Normalizes the axes to a percentage scale, which is useful for comparing \"Share\" metrics.</li> <li><code>Lock Axes</code>: Locks the scale of the axes, allowing for a consistent visual comparison as you move the time slider.</li> </ul> </li> </ol>"},{"location":"visualizations/scatter_plot/#implementation-walkthrough","title":"Implementation Walkthrough","text":"<p>This visualization consists of two <code>ScatterBrush</code> widgets: a primary chart for exploration and a secondary, linked chart that mirrors the user's selection.</p>"},{"location":"visualizations/scatter_plot/#step-1-main-scatter-plot-initialization","title":"Step 1: Main Scatter Plot Initialization","text":"<p>First, we initialize the main <code>ScatterBrush</code> widget. We provide it with the full <code>wide</code> DataFrame and set default values for the X and Y axes (<code>StockShare</code> and <code>SalesShare</code>).</p> <pre><code>from Isea.scatter import ScatterBrush\n\n# The 'wide' DataFrame is already prepared from the first cell\n# 'xyVars', 'yearMin', 'yearMax' are also pre-calculated\n\nw = ScatterBrush(\n    wide,\n    x=\"StockShare\",   # Default X-axis\n    y=\"SalesShare\",   # Default Y-axis\n    key=\"id\",\n    label=\"label\",\n    color=\"mode\",\n    legend=True,\n    xyVars=xyVars,\n    yearMin=yearMin,\n    yearMax=yearMax,\n    width=1080,\n    height=520,\n)\n\n# To display it, you simply call the widget variable\nw\n</code></pre>"},{"location":"visualizations/scatter_plot/#step-2-linked-scatter-plot-and-sync-logic","title":"Step 2: Linked Scatter Plot and Sync Logic","text":"<p>Next, we create a second, initially empty ScatterBrush widget (w_link). We then define a _sync function that will be responsible for updating this second chart based on interactions with the first one.</p> <pre><code># Create an empty second widget with the same configuration\nw_link = ScatterBrush(\n    wide.iloc[0:0].to_dict(\"records\"), # Initially empty data\n    x=\"StockShare\", y=\"SalesShare\",\n    key=\"id\", label=\"label\", color=\"mode\",\n    # ... other config options match the primary widget\n)\n\n# This function contains the logic to synchronize the two charts\ndef _sync(*_):\n    # 1. Get the current axes from the main widget\n    opts = getattr(w, \"options\", {}) or {}\n    x, y = opts.get(\"x\"), opts.get(\"y\")\n\n    # 2. Get the current selection (the \"brushed\" points)\n    sel = w.selection if isinstance(w.selection, dict) else {}\n    keys = sel.get(\"keys\", []) or []\n\n    # 3. Filter the main DataFrame to get the selected data\n    sub = wide[wide[\"id\"].isin(keys)] if keys else wide.iloc[0:0]\n\n    # 4. Push the new data and axis settings to the linked widget\n    w_link.data = sub.to_dict(\"records\")\n    w_link.options = {**(w_link.options or {}), \"x\": x, \"y\": y}\n\ndisplay(w_link)\n\n</code></pre>"},{"location":"visualizations/scatter_plot/#step-3-linking-interactivity-with-observers","title":"Step 3: Linking Interactivity with Observers","text":"<p>To make the synchronization happen automatically, we attach the _sync function to the selection and options properties of the main widget (w). Now, whenever the user brushes points or changes an axis, _sync is called.</p> <pre><code># React to changes in the selection (brushing)\nw.observe(lambda ch: _sync(), names=\"selection\")\n\n# React to changes in the options (like changing an axis)\nw.observe(lambda ch: _sync(), names=\"options\")\n\n# Run sync once initially to ensure the linked chart is correctly configured\n_sync()\n</code></pre>"},{"location":"visualizations/scatter_plot/#analytical-questions-this-view-can-answer","title":"Analytical Questions This View Can Answer","text":"<ul> <li>Is there a linear relationship between the number of chargers and BEV sales?</li> <li>Which countries are accelerating their transition the fastest (Sales Share &gt; Stock Share)?</li> <li>How do the adoption profiles of buses versus cars compare in Europe?</li> </ul> <p>For detailed examples of how to use this tool, please see our tutorials.</p>"},{"location":"visualizations/trendline_chart/","title":"Trend Line Chart","text":"<p>Purpose: To visualize historical trends and future predictions for multiple time series on a single chart.</p> <p>This visualization combines solid lines for historical data with dashed lines for predictions, allowing users to compare trajectories and forecasts across different entities.</p> <p></p>"},{"location":"visualizations/trendline_chart/#components-and-features","title":"Components and Features","text":"<ol> <li> <p>Dual-Line Encoding:</p> <ul> <li>Solid lines: Represent historical (actual) data points.</li> <li>Dashed lines: Represent predicted or forecasted values.</li> <li>This clear visual distinction helps users understand data certainty.</li> </ul> </li> <li> <p>Interactive Legend:</p> <ul> <li>Click: Toggle series visibility by clicking on legend items.</li> <li>Hidden series are grayed out in the legend and removed from the chart.</li> </ul> </li> <li> <p>Hover Crosshair:</p> <ul> <li>A vertical line follows the cursor, snapping to years.</li> <li>A tooltip displays all visible series values for the selected year, sorted by magnitude.</li> </ul> </li> <li> <p>Automatic Scaling:</p> <ul> <li>Axes automatically adjust based on visible series, recalculating when series are toggled.</li> </ul> </li> </ol>"},{"location":"visualizations/trendline_chart/#how-to-build","title":"How to Build","text":"<p>The <code>D3TrendLine</code> widget accepts a list of series, where each series is a dictionary containing:</p> <ul> <li><code>label</code>: Name of the series (shown in legend)</li> <li><code>history_x</code> / <code>history_y</code>: Arrays for historical data points</li> <li><code>pred_x</code> / <code>pred_y</code>: Arrays for prediction data points</li> <li><code>color</code> (optional): Custom color for the series</li> </ul> <p>The history and prediction lines connect automatically if they share a common year.</p>"},{"location":"visualizations/trendline_chart/#quick-example","title":"Quick Example","text":"<pre><code>from Isea.trendline import D3TrendLine\n\n# Sample data: EV adoption trends\nseries_data = [\n    {\n        \"label\": \"Norway\",\n        \"history_x\": [2018, 2019, 2020, 2021, 2022, 2023],\n        \"history_y\": [31, 42, 54, 65, 79, 82],\n        \"pred_x\": [2023, 2024, 2025, 2026],\n        \"pred_y\": [82, 88, 92, 95],\n        \"color\": \"#00d4ff\"\n    },\n    {\n        \"label\": \"Germany\",\n        \"history_x\": [2018, 2019, 2020, 2021, 2022, 2023],\n        \"history_y\": [2, 3, 6, 13, 18, 23],\n        \"pred_x\": [2023, 2024, 2025, 2026],\n        \"pred_y\": [23, 30, 38, 45],\n        \"color\": \"#ff6b6b\"\n    },\n    {\n        \"label\": \"USA\",\n        \"history_x\": [2018, 2019, 2020, 2021, 2022, 2023],\n        \"history_y\": [2, 2, 2, 4, 6, 9],\n        \"pred_x\": [2023, 2024, 2025, 2026],\n        \"pred_y\": [9, 14, 20, 28],\n        \"color\": \"#ffd93d\"\n    },\n]\n\ntrend = D3TrendLine(\n    data=series_data,\n    title=\"EV Market Share Trends &amp; Forecast\",\n    yLabel=\"Market Share (%)\",\n    xLabel=\"Year\",\n    width=800,\n    height=400\n)\n\ntrend\n</code></pre>"},{"location":"visualizations/trendline_chart/#available-configuration-options","title":"Available Configuration Options","text":"Parameter Type Description <code>data</code> list List of series dictionaries (see structure above) <code>title</code> str Chart title displayed at the top <code>xLabel</code> str Label for the X-axis (default: \"Year\") <code>yLabel</code> str Label for the Y-axis (default: \"Value\") <code>width</code> int Chart width in pixels (default: 800) <code>height</code> int Chart height in pixels (default: 400)"},{"location":"visualizations/trendline_chart/#series-data-structure","title":"Series Data Structure","text":"<p>Each series dictionary should contain:</p> Key Type Description <code>label</code> str Series name for legend <code>history_x</code> list X values (years) for historical data <code>history_y</code> list Y values for historical data <code>pred_x</code> list X values (years) for predictions <code>pred_y</code> list Y values for predictions <code>color</code> str (Optional) Hex color code"},{"location":"visualizations/trendline_chart/#analytical-questions-this-view-can-answer","title":"Analytical Questions This View Can Answer","text":"<ul> <li>Which countries are leading the EV transition and by how much?</li> <li>How do growth trajectories differ between early adopters and late entrants?</li> <li>What do the forecasts suggest about market convergence?</li> <li>At what year might a lagging country catch up to a leader?</li> </ul>"},{"location":"visualizations/visualizations/","title":"Our Interactive Visualizations","text":"<p>This project features two primary, coordinated visualizations designed to provide a comprehensive overview of the global EV transition, from a high-level geographic perspective to a detailed diagnostic analysis.</p>"},{"location":"visualizations/visualizations/#1-global-adoption-infrastructure-map","title":"1. Global Adoption &amp; Infrastructure Map","text":"<p>The world map provides a geographic overview of electric vehicle adoption and charging infrastructure. It serves as the main entry point for exploring the dataset, allowing you to quickly identify regional trends and outliers.</p> <p></p>"},{"location":"visualizations/visualizations/#key-features","title":"Key Features","text":"<ul> <li>Metric Selection: You can switch between several key metrics to color the map, including:<ul> <li>EV Stock Share: The proportion of the national fleet that is electric.</li> <li>EV Sales Share: The proportion of new vehicle sales that are electric.</li> <li>Charging Infrastructure: The total number of public charging points.</li> </ul> </li> <li>Interactive Time Series: Clicking on a country displays its entire historical trajectory for the selected metric in the time-series line chart below the map.</li> </ul>"},{"location":"visualizations/visualizations/#analytical-purpose","title":"Analytical Purpose","text":"<p>This view helps you answer high-level questions such as: - Which regions are the clear early adopters (e.g., Nordics, China)? - Which countries are showing rapid growth in recent years? - Are there regions where charging infrastructure is lagging behind adoption rates? - Can we spot any outliers that deviate significantly from their neighbors?</p>"},{"location":"visualizations/visualizations/#2-transition-dynamics-scatter-plot","title":"2. Transition Dynamics Scatter Plot","text":"<p>This interactive scatter plot is a powerful diagnostic tool for revealing the current behavior and dynamics of the EV transition within selected countries and vehicle modes.</p> <p></p>"},{"location":"visualizations/visualizations/#key-features_1","title":"Key Features","text":"<ul> <li>Dynamic Axes: Choose any two metrics to plot against each other for comparative analysis.</li> <li>Time Slider: Animate the plot over time to see how different regions and modes have evolved.</li> <li>Brushing and Linking: Select a group of data points by clicking and dragging. A second, linked scatter plot will appear below, showing only your selected data for focused analysis.</li> <li>Legend Filtering: Click on items in the legend (e.g., \"Buses\", \"Vans\") to toggle their visibility on the plot.</li> <li>Analytical Overlays: Buttons to add a <code>y=x</code> diagonal line, normalize axes to a 0-100 scale, and lock the zoom level for consistent year-over-year comparison.</li> </ul>"},{"location":"visualizations/visualizations/#analytical-purpose_1","title":"Analytical Purpose","text":"<p>This tool is designed for deep-dive analysis. For step-by-step guides on how to use it to answer specific research questions, please see our tutorials:</p> <ul> <li>Tutorial: Transition Analysis</li> <li>Tutorial: Infrastructure Analysis</li> </ul>"},{"location":"visualizations/visualizations/#3-bubble-chart","title":"3. Bubble Chart","text":"<p>The bubble chart allows you to explore relationships between three continuous variables simultaneously, using position and size encoding.</p> <p></p>"},{"location":"visualizations/visualizations/#key-features_2","title":"Key Features","text":"<ul> <li>Three-Dimensional Encoding: X-axis, Y-axis, and bubble radius each represent a different metric.</li> <li>Color-Coded Groups: Bubbles are colored by category (e.g., continent, vehicle type) for pattern identification.</li> <li>Interactive Tooltips: Hover over any bubble to see detailed information for that entity.</li> </ul>"},{"location":"visualizations/visualizations/#analytical-purpose_2","title":"Analytical Purpose","text":"<p>This view helps you answer questions such as: - Which countries have high EV sales but low market penetration? - Are there regional clusters in adoption patterns? - Which outliers are performing above or below expectations?</p>"},{"location":"visualizations/visualizations/#4-correlation-heatmap","title":"4. Correlation Heatmap","text":"<p>The heatmap visualizes relationships and correlations between multiple variables in a color-coded matrix format.</p> <p></p>"},{"location":"visualizations/visualizations/#key-features_3","title":"Key Features","text":"<ul> <li>Color-Coded Matrix: Cell color intensity represents the strength of correlation or value magnitude.</li> <li>Flexible Colormaps: Use sequential (<code>viridis</code>) or diverging (<code>coolwarm</code>) color schemes.</li> <li>Interactive Tooltips: Hover to see exact values for any cell intersection.</li> <li>Value Labels: Numeric values displayed directly on cells for quick reading.</li> </ul>"},{"location":"visualizations/visualizations/#analytical-purpose_3","title":"Analytical Purpose","text":"<p>This view helps you answer questions such as: - Which metrics are strongly correlated with EV adoption? - Are there unexpected negative correlations in the data? - How do variables relate to each other across the dataset?</p>"},{"location":"visualizations/visualizations/#5-trend-line-chart","title":"5. Trend Line Chart","text":"<p>The trend line chart combines historical data with forecasts, allowing you to track and compare multiple time series on a single view.</p> <p></p>"},{"location":"visualizations/visualizations/#key-features_4","title":"Key Features","text":"<ul> <li>Dual-Line Encoding: Solid lines for historical data, dashed lines for predictions.</li> <li>Interactive Legend: Click to toggle series visibility for focused comparisons.</li> <li>Hover Crosshair: Vertical line displays all values at the selected year.</li> <li>Automatic Scaling: Axes adjust dynamically based on visible series.</li> </ul>"},{"location":"visualizations/visualizations/#analytical-purpose_4","title":"Analytical Purpose","text":"<p>This view helps you answer questions such as: - Which countries are leading the EV transition and by how much? - How do growth trajectories differ between early adopters and late entrants? - What do forecasts suggest about future market dynamics? - When might lagging countries catch up to leaders?</p>"},{"location":"visualizations/visualizations/#detailed-documentation","title":"Detailed Documentation","text":"<p>For in-depth information on each visualization, including implementation details and code examples:</p> <ul> <li>World Map &amp; Line Chart: Geographic entry point for global trends.</li> <li>Diagnostic Scatter Plot: Core tool for comparative analysis.</li> <li>Parallel Coordinates Plot: Multivariate country profile comparison.</li> <li>Bubble Chart: Three-variable relationship explorer.</li> <li>Correlation Heatmap: Matrix view for correlations and cross-tabulations.</li> <li>Trend Line Chart: Historical trends and forecast comparisons.</li> <li>Advanced Analysis Panel: On-demand ML toolkit for structural insights.</li> </ul>"},{"location":"visualizations/world_map/","title":"World Map &amp; Line Chart","text":"<p>Purpose: To provide a high-level, geographic overview of electric vehicle adoption and charging infrastructure over time.</p> <p>This visualization combines a global choropleth map with an interactive line chart to show where the EV transition is happening and how each country's trajectory has evolved.</p> <p></p>"},{"location":"visualizations/world_map/#components-and-features","title":"Components and Features","text":"<ol> <li> <p>Interactive World Map:</p> <ul> <li>Each country is colored based on the value of the selected metric for the year shown on the time slider.</li> <li>Hover: Hovering over a country displays its name and the precise metric value.</li> <li>Click: Clicking a country pins it to the line chart below, allowing you to compare its historical evolution against other selected countries.</li> </ul> </li> <li> <p>Historical Line Chart:</p> <ul> <li>Displays the trend of the selected metric across all available years for the countries you have selected on the map.</li> <li>This allows you to identify trends, inflection points, and compare growth rates between nations.</li> </ul> </li> <li> <p>Metric Selector (Dropdown):</p> <ul> <li>Allows you to change the variable displayed on both the map and the line chart.</li> </ul> </li> </ol>"},{"location":"visualizations/world_map/#implementation-walkthrough","title":"Implementation Walkthrough","text":"<p>The <code>WorldMapLineChart</code> is built in three main steps: data preparation, widget initialization, and linking interactivity.</p>"},{"location":"visualizations/world_map/#step-1-data-preparation","title":"Step 1: Data Preparation","text":"<p>The primary dataset (<code>wide</code>) contains data for each <code>region</code> and <code>mode</code>. For this map, we need to ensure that when a country is clicked, the data for \"Cars\" is prioritized for coloring the map. This is achieved by sorting the DataFrame.</p> <pre><code># Create a copy to work with\nwide_sorted = wide.copy()\n\n# Define the priority for vehicle modes\nmode_priority = [\"Cars\", \"Vans\", \"Buses\", \"Trucks\"]\n\n# Helper function to extract mode from the 'label' column\ndef extract_mode(label: str):\n    return label.split(\"\u2022\", 1).strip() if \"\u2022\" in str(label) else None\n\n# Create temporary columns for sorting\nwide_sorted[\"_mode\"] = wide_sorted[\"label\"].apply(extract_mode)\nwide_sorted[\"_mode_rank\"] = wide_sorted[\"_mode\"].apply(\n    lambda m: mode_priority.index(m) if m in mode_priority else 999\n)\n\n# Sort by region first, then by the mode rank\nwide_sorted = wide_sorted.sort_values(by=[\"region\", \"_mode_rank\"]).reset_index(drop=True)\n</code></pre>"},{"location":"visualizations/world_map/#step-2-widget-initialization","title":"Step 2: Widget Initialization","text":"<p>We create a dropdown widget for metric selection and initialize the WorldMapLineChart with the prepared data. The initial metric is set to StockShare.</p> <pre><code>import ipywidgets as widgets\nfrom Isea.worldmaplinechart import WorldMapLineChart\n\n# Define the list of metrics for the dropdown\nmetrics = [\n    \"StockBEV\", \"StockFCEV\", \"StockPHEV\",\n    \"SalesBEV\", \"SalesFCEV\", \"SalesPHEV\",\n    \"SalesShare\", \"StockShare\",\n    \"ChargingStations\",\n]\n\nmetric_dropdown = widgets.Dropdown(\n    options=metrics,\n    value=\"StockShare\",\n    description=\"Metric:\",\n    layout=widgets.Layout(width=\"300px\"),\n)\n\n# Initialize the main widget\nw_world = WorldMapLineChart(\n    df=wide_sorted,\n    metric=metric_dropdown.value,\n    region_col=\"region\",\n    label_col=\"label\",\n    id_col=\"id\",\n    title=\"World EV Map\",\n    subtitle=\"Hover, click, and compare countries over time.\",\n)\n</code></pre>"},{"location":"visualizations/world_map/#step-3-linking-interactivity","title":"Step 3: Linking Interactivity","text":"<p>An observer function is created to link the dropdown widget to the map. When the user selects a new metric from the dropdown, this function calls set_metric() to update the visualization.</p> <pre><code># Callback function to handle dropdown changes\ndef on_metric_change(change):\n    new_metric = change[\"new\"]\n    w_world.set_metric(new_metric)\n\n# Attach the observer to the dropdown\nmetric_dropdown.observe(on_metric_change, names=\"value\")\n</code></pre>"},{"location":"visualizations/world_map/#step-4-display-the-visualization","title":"Step 4: Display the Visualization","text":"<p>Finally, we display the dropdown and the map widget together in a vertical box layout.</p> <pre><code># Display both widgets\nwidgets.VBox([metric_dropdown, w_world])\n</code></pre>"},{"location":"visualizations/world_map/#available-metrics","title":"Available Metrics","text":"<ul> <li>StockBEV / PHEV / FCEV: The absolute number of Battery Electric, Plug-in Hybrid, or Fuel Cell Electric Vehicles on the road. Useful for understanding market size.</li> <li>SalesBEV / PHEV / FCEV: The absolute number of EVs sold in a given year. Measures the current market pulse.</li> <li>StockShare: The percentage of a country's total vehicle fleet that is electric. This measures market penetration.</li> <li>SalesShare: The percentage of new vehicle sales in a year that are electric. This measures the speed of the transition.</li> <li>ChargingStations: The total number of public charging points (both fast and slow). This measures infrastructure adequacy.</li> </ul>"},{"location":"visualizations/world_map/#analytical-questions-this-view-can-anwser","title":"Analytical Questions This View Can Anwser","text":"<ul> <li>Which geographic regions are the clear leaders in EV adoption?</li> <li>How did a country's adoption trajectory change after a specific year?</li> <li>Which countries are investing most heavily in charging infrastructure relative to their size?</li> </ul>"}]}